!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e,i){return(e=a(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,a(s.key),s)}}function n(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var r=s.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}window.s1=function(t){var e,i,o,a,h,l=[],c=[],u=0,f=!1,d="",y=[10,15],p="start",g=[{name:"Acquaintance",score:100,phrases:["hello what is your name","nice to meet you","what do you do for fun","what are your hobbies","do you have any pets","what is your favorite food"]},{name:"Friendship",score:200,phrases:["how are you","how is your day","i am here for you","i am here to help","i am here to listen","i am here to talk","i am here to support","do you want to hang out sometime","do you want to get coffee","do you want to get lunch","do you want to get dinner","do you want to get drinks","do you want to get ice cream"]},{name:"Companionship",score:450,phrases:["are you okay","i am not okay","do you want to talk","i really like you","i am sorry for hurting you","i need to tell you something","i need your help"]}],v=document.getElementById("phrase"),w=function(){if(d=d.replace(/^\s+/,""),h&&d){var t=d.split(""),i=h.phrase.split("");e.lives=3;var s=t.map((function(t,s){var r=t===i[s];return r||(e.lives-=1),'<span class="'.concat(r?"is-correct":"is-incorrect",'">').concat(t,"</span>")}));v.innerHTML=s.join("")}else v.innerHTML="";v.classList.toggle("is-active",d.length>0)},m=function(){function i(s){var o=s.dots,n=s.attempt,a=s.dotSize,h=s.circlePos,l=s.intensity,c=s.fraction;if(r(this,i),this.circlePos=h,this.dots=o,this.dotSize=a,this.lifespan=30,this.life=0,this.intensity=l,this.targetPosition={y:h.y,x:h.x},this.fraction=c,this.fraction>0){var u=t.ceil(this.dots.length*this.fraction);this.dots=this.dots.slice(0,u)}else this.dots=[];this.success="success"===n,this.success&&(this.targetPosition={x:e.x,y:e.targetY,includePos:!1}),this.color=t.color(this.success?"limegreen":"red")}return n(i,[{key:"draw",value:function(){for(var i=0;i<this.dots.length;i++){var s=this.dots[i];t.fill(this.color.levels[0],this.color.levels[1],this.color.levels[2],255*s.opacity);var r={x:this.targetPosition.x?t.lerp(this.circlePos.x+s.x,this.targetPosition.x,this.life/this.lifespan):this.circlePos.x+s.x,y:t.lerp(this.circlePos.y+s.y,this.targetPosition.y+(this.targetPosition.includePos?s.y:0),this.life/this.lifespan)};t.circle(r.x,r.y,this.dotSize)}if(this.life++,this.life>this.lifespan&&(c.splice(c.indexOf(this),1),v.classList.remove("is-active"),h=null,this.success)){var o=this.intensity*this.fraction;e.vPoints+=o,e.score+=o}}}]),i}(),x=function(){function i(){r(this,i),this.x=t.width/2,this.y=0,this.targetY=t.height/10,this.opacity=0,this.state="growing",this.stateTimer=0}return n(i,[{key:"draw",value:function(){t.height;t.noStroke(),t.textAlign(t.CENTER,t.CENTER),t.noStroke(),t.fill("rgba(255,255,255,.5)"),t.textAlign(t.CENTER,t.TOP),"growing"===this.state?(this.stateTimer++,this.y=t.lerp(0,this.targetY,this.stateTimer/60),this.opacity=t.lerp(0,255,this.stateTimer/60),this.stateTimer>60&&(this.state="active",this.stateTimer=0)):"shrinking"===this.state&&(this.stateTimer++,this.y=t.lerp(this.targetY,0,this.stateTimer/60),this.opacity=t.lerp(255,0,this.stateTimer/60),this.stateTimer>60&&(this.state="growing",this.stateTimer=0,e.currLevel++,l=[],e.speed+=.5,e.setPosition(),e.y=e.targetY)),t.circle(this.x,0,2*this.y,this.y),t.textFont("Helvetica"),t.fill(t.color(0,this.opacity)),t.textSize(18),t.textStyle(t.NORMAL),t.text("".concat(g[e.currLevel].name),this.x,this.y/6),t.textStyle(t.BOLD),t.textSize(14),t.text("".concat(g[e.currLevel].score,"pts"),this.x,this.y/2)}}]),i}(),P=n((function n(){var a=this;r(this,n),s(this,"getSize",(function(){var t=20+.5*a.vPoints;return t>a.maxVPoints?a.maxVPoints:t})),s(this,"setPosition",(function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=a.currLevel>0?g[a.currLevel-1].score:0,r=(e.score+i-s)/(g[a.currLevel].score-s),n=1/3;a.targetY=t.height-(t.height*n+(t.height*(1-n)-o.y)*r)})),s(this,"draw",(function(){if("start"===p)a.targetY-=a.speed,a.targetY<=2*t.height/3&&(p="play");else if(a.vPoints>0&&(a.vPoints-=.001),h&&a.active){var s={x:t.width/2+(h.reverse?1:-1)*h.radius,y:h.y},r="success"===h.attempt?.1:a.speed/h.radius;if(a.theta+=r*h.thetaDirection,a.x=s.x+h.radius*t.cos(a.theta+h.thetaOffset),a.y=s.y+h.radius*t.sin(a.theta+h.thetaOffset),t.drawingContext.setLineDash(y),t.drawingContext.lineDashOffset=i.offset,t.strokeWeight(1),t.fill("rgba(0,0,0,.5)"),t.circle(s.x,s.y,2*h.radius),t.drawingContext.setLineDash([]),t.strokeWeight(3),t.stroke("white"),t.arc(s.x,s.y,2*h.radius,2*h.radius,h.thetaOffset+(h.thetaDirection<0?a.theta:0),h.thetaOffset+(h.thetaDirection>0?a.theta:0)),h.phrase===d&&"success"!==h.attempt&&(h.attempt="success"),t.abs(a.theta)>=t.TWO_PI-r){if(d.length<h.phrase.length){var n=h.phrase.length-d.length;e.lives-=n,d+="â€¢".repeat(n),h.setFraction(),w()}h.attempt=e.lives>=0?"success":"fail",h.burst=!0,a.setPosition(h.intensity*h.fraction),c.push(new m(h)),a.active=!1}}a.size=a.getSize(),t.stroke("white"),t.fill(t.lerpColor(t.color(57,20,104),t.color(162,242,239),a.vPoints/100)),t.circle(a.x,a.y,a.size),t.textAlign(t.LEFT,t.TOP),t.noStroke(),t.fill("white"),t.textSize(20),t.text("Score: ".concat(e.score.toFixed(2)),10,10),a.y!==a.targetY&&(a.y=t.lerp(a.y,a.targetY,.1)),!h&&a.y<=o.y&&(o.state="shrinking")})),this.targetY=this.y=t.height,this.speed=3,this.score=0,this.vPoints=0,this.maxVPoints=100,this.x=t.width/2,this.theta=0,this.active=!1,this.currLevel=0,this.lives=3})),b=n((function i(o){var n=this;r(this,i),s(this,"setFraction",(function(){n.fraction=e.lives>0?e.lives/3:0})),s(this,"draw",(function(){n.y>t.height+n.planetSize/2&&(n.dead=!0),t.noStroke();var i=t.color(0,0,0);n.collided&&(i=t.color(255,255,0),"success"===n.attempt?i=t.color("limegreen"):"trying"===n.attempt?i=t.color("orange"):"fail"===n.attempt?i=t.color("red"):n.past&&(i=t.color(200,200,200))),t.fill(i,(30-n.intensity)/30*255),t.circle(n.x,n.y,10);n.radius=100+n.planetSize/2,n.circlePos={x:n.x+(n.reverse?1:-1)*n.radius,y:n.y};var s=n.dots;if(!n.burst){if(t.fill("rgba(0,0,0,0.3)"),t.stroke(t.color(i,10)),t.strokeWeight(1),t.circle(n.circlePos.x,n.circlePos.y,n.planetSize+n.dotSize+30),null!==n.attempt)if(n.setFraction(),n.fraction>0){var r=t.ceil(n.dots.length*n.fraction);s=s.slice(0,r)}else s=[];for(var o=0;o<s.length;o++){var a=s[o];t.fill(i.levels[0],i.levels[1],i.levels[2],255*a.opacity),t.circle(n.circlePos.x+a.x+10*t.cos(.01*t.frameCount+a.x*a.y*2),n.circlePos.y+a.y+10*t.sin(.01*t.frameCount+a.x*a.y*2+t.PI/3),n.dotSize)}if(!n.past||"trying"===n.attempt){t.textAlign(t.CENTER,t.CENTER);var l=t.textWidth(n.phrase)+8,c=t.textSize()+8;t.noStroke(),t.fill("rgba(0,0,0,.5)");var u="rgba(255,255,255,.5)";"trying"===n.attempt&&(u="hotpink",t.rect(n.circlePos.x-l/2,n.circlePos.y-c/2,l,c)),t.fill(u),t.textSize(20),t.text(n.phrase,n.circlePos.x,n.circlePos.y)}}h||(n.y+=e.speed);t.abs(n.y-e.y)<n.size/2+4+e.size/2&&!n.collided&&!e.active&&(n.collided=!0),n.y>e.y+n.size/2+4&&(n.past=!0)})),this.index=o;this.intensity=30*Math.random()+10,this.size=(40-this.intensity)/40*10+30;var a=t.abs(2*t.height/3-this.y)/e.speed;this.planetSize=t.map(this.intensity,10,40,100,300,0),this.y=-this.planetSize,this.speed=t.width/2/a,this.x=t.width/2,this.collided=!1,this.attempt=null,this.burst=!1,this.past=!1,this.id=Math.random().toString(36).substr(2,9),this.reverse=f,f=!f,this.thetaDirection=this.reverse?1:-1,this.thetaOffset=this.reverse?t.PI:0;var l=g[e.currLevel].phrases;this.phrase=l[Math.floor(Math.random()*l.length)],this.dots=[];for(var c=0;c<500;c++){var u=t.random(t.TWO_PI),d={x:this.planetSize/2*t.random()*t.cos(u),y:this.planetSize/2*t.random()*t.sin(u),opacity:t.random()};this.dots.push(d)}this.dotSize=this.planetSize/this.intensity})),S=n((function i(){var o=this;r(this,i),s(this,"draw",(function(){"play"!==p||h||(o.offset-=e.speed),t.drawingContext.setLineDash(y),t.drawingContext.lineDashOffset=o.offset,t.stroke("#fff"),t.strokeWeight(1);var i=e.active?h.y:e.y;t.line(t.width/2,0,t.width/2,i),t.drawingContext.setLineDash([]),t.strokeWeight(3),t.line(t.width/2,i,t.width/2,t.height)})),this.offset=0}));t.setup=function(){t.createCanvas(t.windowWidth,t.windowHeight),i=new S,e=new P,o=new x,a=t.height/3},t.draw=function(){if(h||"play"!==p||(u+=e.speed),u>a&&(l.push(new b),u=0),t.background(t.color(56,79,69)),i.draw(),e.draw(),"start"===p);else if("play"===p){for(var s=0;s<l.length;s++)l[s].draw();l=l.filter((function(t){return!t.dead}));for(var r=0;r<c.length;r++)c[r].draw()}o.draw()},t.windowResized=function(){var i=t.windowWidth>t.windowHeight?t.windowHeight:t.windowWidth;t.resizeCanvas(i,t.windowHeight),e.x=t.width/2,l.forEach((function(e){e.x=t.width/2})),o.x=t.width/2},t.keyPressed=function(){if(h)e.active&&((t.keyCode>=65&&t.keyCode<=90||32===t.keyCode||8===t.keyCode)&&(8===t.keyCode?d=d.slice(0,-1):13===t.keyCode?d="":d+=t.key),d=d.replace(/  +/g," ")),w();else if(32===t.keyCode){d="";var i=l.find((function(t){return t.collided&&!t.past&&null===t.attempt}));i&&(e.active=!0,e.theta=0,e.lives=3,i.attempt="trying",h=i);e.vPoints>0&&(e.vPoints-=5)}}},window.p5instance&&window.p5instance.remove(),window.p5instance=new p5(window.s1)}]);